CREATE TABLE ASIGNATURA (REFERENCIA BIGINT NOT NULL, CARACTER VARCHAR(255), CODIGO BIGINT, CREDITOS_PRACTICOS INTEGER, CREDITOS_TEORICOS INTEGER, CREDITOS_TOTALES INTEGER, CURSO VARCHAR(255), DURACION VARCHAR(255), IDIOMAS VARCHAR(255), NOMBRE VARCHAR(255), OFERTA INTEGER, UNIDAD_TEMPORAL VARCHAR(255), GRUPO_ASIGNATURA_CURSO_ACADEMICO VARCHAR(255), PRIMARY KEY (REFERENCIA))
CREATE TABLE CENTRO (ID BIGINT NOT NULL, TLF_CONSERJERIA BIGINT, DIRECCION VARCHAR(255), NOMBRE VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE GRUPO_ASIGNATURA (CURSO_ACADEMICO VARCHAR(255) NOT NULL, OFERTA VARCHAR(255), PRIMARY KEY (CURSO_ACADEMICO))
CREATE TABLE GRUPO (ID BIGINT NOT NULL, ASIGNAR TINYINT(1) default 0, CURSO VARCHAR(255) NOT NULL, INGLES TINYINT(1) default 0, LETRA VARCHAR(255) NOT NULL, PLAZAS BIGINT, TURNO_MAÃ‘ANA_TARDE VARCHAR(255), VISIBLE TINYINT(1) default 0, GRUPO_ID BIGINT, GRUPO_ASIGNATURA_CURSO_ACADEMICO VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE MATRICULA (ID BIGINT NOT NULL, CURSO_ACADEMICO VARCHAR(255), ESTADO VARCHAR(255), FECHA_MATRICULA DATE, NUEVO_INGRESO TINYINT(1) default 0, NUM_ARCHIVO BIGINT, TURNO_PREFERENTE VARCHAR(255), ASIGNATURAS_MATRICULA_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TITULACION (CODIGO BIGINT NOT NULL, CREDITOS INTEGER, NOMBRE VARCHAR(255), TITULACION_CODIGO BIGINT, PRIMARY KEY (CODIGO))
CREATE TABLE EXPEDIENTE (NUM_EXPEDIENTE BIGINT NOT NULL, ACTIVO TINYINT(1) default 0, NOTA_MEDIA_PROVISIONAL BIGINT, MATRICULA_ID BIGINT, PRIMARY KEY (NUM_EXPEDIENTE))
CREATE TABLE ASIGNATURAS_MATRICULA (ID BIGINT NOT NULL, CALIFICACION INTEGER, PRIMARY KEY (ID))
CREATE TABLE ENCUESTA (ID INTEGER NOT NULL, FECHA_ENVIO DATE, PRIMARY KEY (ID))
CREATE TABLE TITULACION_CENTRO (centros_ID BIGINT NOT NULL, titulaciones_CODIGO BIGINT NOT NULL, PRIMARY KEY (centros_ID, titulaciones_CODIGO))
CREATE TABLE GRUPO_ASIGNATURA_ASIGNATURA (Grupo_asignatura_CURSO_ACADEMICO VARCHAR(255) NOT NULL, asignatura_REFERENCIA BIGINT NOT NULL, PRIMARY KEY (Grupo_asignatura_CURSO_ACADEMICO, asignatura_REFERENCIA))
CREATE TABLE GRUPO_ASIGNATURA_ENCUESTA (grupo_asignaturas_CURSO_ACADEMICO VARCHAR(255) NOT NULL, encuestas_ID INTEGER NOT NULL, PRIMARY KEY (grupo_asignaturas_CURSO_ACADEMICO, encuestas_ID))
CREATE TABLE GRUPO_ASIGNATURA_GRUPO (Grupo_asignatura_CURSO_ACADEMICO VARCHAR(255) NOT NULL, grupo_ID BIGINT NOT NULL, PRIMARY KEY (Grupo_asignatura_CURSO_ACADEMICO, grupo_ID))
CREATE TABLE GRUPO_GRUPO (Grupo_ID BIGINT NOT NULL, grupos_ID BIGINT NOT NULL, PRIMARY KEY (Grupo_ID, grupos_ID))
CREATE TABLE GRUPO_TITULACION (Grupo_ID BIGINT NOT NULL, titulacion_CODIGO BIGINT NOT NULL, PRIMARY KEY (Grupo_ID, titulacion_CODIGO))
CREATE TABLE MATRICULA_EXPEDIENTE (Matricula_ID BIGINT NOT NULL, expedientes_NUM_EXPEDIENTE BIGINT NOT NULL, PRIMARY KEY (Matricula_ID, expedientes_NUM_EXPEDIENTE))
CREATE TABLE MATRICULA_ASIGNATURA (Matricula_ID BIGINT NOT NULL, listado_asignaturas_REFERENCIA BIGINT NOT NULL, PRIMARY KEY (Matricula_ID, listado_asignaturas_REFERENCIA))
CREATE TABLE ASIGNATURAS_MATRICULA_MATRICULA (Asignaturas_matricula_ID BIGINT NOT NULL, matriculas_ID BIGINT NOT NULL, PRIMARY KEY (Asignaturas_matricula_ID, matriculas_ID))
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_GRUPO_ASIGNATURA_CURSO_ACADEMICO FOREIGN KEY (GRUPO_ASIGNATURA_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_ASIGNATURA_CURSO_ACADEMICO FOREIGN KEY (GRUPO_ASIGNATURA_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_ASIGNATURAS_MATRICULA_ID FOREIGN KEY (ASIGNATURAS_MATRICULA_ID) REFERENCES ASIGNATURAS_MATRICULA (ID)
ALTER TABLE TITULACION ADD CONSTRAINT FK_TITULACION_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_MATRICULA_ID FOREIGN KEY (MATRICULA_ID) REFERENCES MATRICULA (ID)
ALTER TABLE TITULACION_CENTRO ADD CONSTRAINT FK_TITULACION_CENTRO_titulaciones_CODIGO FOREIGN KEY (titulaciones_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE TITULACION_CENTRO ADD CONSTRAINT FK_TITULACION_CENTRO_centros_ID FOREIGN KEY (centros_ID) REFERENCES CENTRO (ID)
ALTER TABLE GRUPO_ASIGNATURA_ASIGNATURA ADD CONSTRAINT GRPASIGNATURAASIGNATURAGrpasignaturaCURSOACADEMICO FOREIGN KEY (Grupo_asignatura_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO)
ALTER TABLE GRUPO_ASIGNATURA_ASIGNATURA ADD CONSTRAINT GRUPO_ASIGNATURA_ASIGNATURA_asignatura_REFERENCIA FOREIGN KEY (asignatura_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE GRUPO_ASIGNATURA_ENCUESTA ADD CONSTRAINT GRPASIGNATURAENCUESTAgrpoasignaturasCURSOACADEMICO FOREIGN KEY (grupo_asignaturas_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO)
ALTER TABLE GRUPO_ASIGNATURA_ENCUESTA ADD CONSTRAINT FK_GRUPO_ASIGNATURA_ENCUESTA_encuestas_ID FOREIGN KEY (encuestas_ID) REFERENCES ENCUESTA (ID)
ALTER TABLE GRUPO_ASIGNATURA_GRUPO ADD CONSTRAINT GRUPOASIGNATURAGRUPOGrupoasignaturaCURSO_ACADEMICO FOREIGN KEY (Grupo_asignatura_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO)
ALTER TABLE GRUPO_ASIGNATURA_GRUPO ADD CONSTRAINT FK_GRUPO_ASIGNATURA_GRUPO_grupo_ID FOREIGN KEY (grupo_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_grupos_ID FOREIGN KEY (grupos_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_Grupo_ID FOREIGN KEY (Grupo_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_TITULACION ADD CONSTRAINT FK_GRUPO_TITULACION_Grupo_ID FOREIGN KEY (Grupo_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO_TITULACION ADD CONSTRAINT FK_GRUPO_TITULACION_titulacion_CODIGO FOREIGN KEY (titulacion_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE MATRICULA_EXPEDIENTE ADD CONSTRAINT FK_MATRICULA_EXPEDIENTE_expedientes_NUM_EXPEDIENTE FOREIGN KEY (expedientes_NUM_EXPEDIENTE) REFERENCES EXPEDIENTE (NUM_EXPEDIENTE)
ALTER TABLE MATRICULA_EXPEDIENTE ADD CONSTRAINT FK_MATRICULA_EXPEDIENTE_Matricula_ID FOREIGN KEY (Matricula_ID) REFERENCES MATRICULA (ID)
ALTER TABLE MATRICULA_ASIGNATURA ADD CONSTRAINT FK_MATRICULA_ASIGNATURA_Matricula_ID FOREIGN KEY (Matricula_ID) REFERENCES MATRICULA (ID)
ALTER TABLE MATRICULA_ASIGNATURA ADD CONSTRAINT MATRICULA_ASIGNATURAlistado_asignaturas_REFERENCIA FOREIGN KEY (listado_asignaturas_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE ASIGNATURAS_MATRICULA_MATRICULA ADD CONSTRAINT SIGNATURASMATRICULAMATRICULAAsignaturasmatriculaID FOREIGN KEY (Asignaturas_matricula_ID) REFERENCES ASIGNATURAS_MATRICULA (ID)
ALTER TABLE ASIGNATURAS_MATRICULA_MATRICULA ADD CONSTRAINT FK_ASIGNATURAS_MATRICULA_MATRICULA_matriculas_ID FOREIGN KEY (matriculas_ID) REFERENCES MATRICULA (ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
